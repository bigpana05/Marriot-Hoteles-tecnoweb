<section class="confirmation-page">
  <div class="confirmation-container">
    <!-- Estado de carga -->
    <div *ngIf="loading" class="loading-state">
      <div class="spinner"></div>
      <p>Cargando información de la reserva...</p>
    </div>

    <!-- Estado de error -->
    <div *ngIf="error && !loading" class="error-state">
      <div class="error-icon">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10" />
          <line x1="15" y1="9" x2="9" y2="15" />
          <line x1="9" y1="9" x2="15" y2="15" />
        </svg>
      </div>
      <h2>No se encontró la reserva</h2>
      <p>{{ error }}</p>
      <button class="btn-primary" (click)="goToHome()">Volver al inicio</button>
    </div>

    <!-- Contenido de confirmación -->
    <div *ngIf="booking && !loading" class="confirmation-content">
      <!-- Encabezado de éxito -->
      <div class="success-header">
        <div class="success-icon">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
            <polyline points="22 4 12 14.01 9 11.01" />
          </svg>
        </div>
        <h1>¡Reserva confirmada!</h1>
        <p class="confirmation-message">
          Tu reserva ha sido confirmada exitosamente. Hemos enviado un correo de confirmación a
          <strong>{{ booking.guestInfo.email }}</strong>
        </p>
      </div>

      <!-- Código de confirmación -->
      <div class="confirmation-code-box">
        <span class="code-label">Número de confirmación</span>
        <span class="code-value">{{ booking.confirmationCode }}</span>
      </div>

      <!-- Detalles de la reserva -->
      <div class="booking-details">
        <div class="hotel-info">
          <h2>{{ booking.hotelName }}</h2>
          <p class="room-type">{{ booking.roomName }}</p>
          <p class="rate-name">{{ booking.rateName }}</p>
        </div>

        <div class="dates-grid">
          <div class="date-item">
            <span class="date-label">Check-in</span>
            <span class="date-value">{{ formatDate(booking.checkIn) }}</span>
            <span class="date-time">Desde las 15:00</span>
          </div>
          <div class="date-item">
            <span class="date-label">Check-out</span>
            <span class="date-value">{{ formatDate(booking.checkOut) }}</span>
            <span class="date-time">Antes de las 12:00</span>
          </div>
        </div>

        <div class="guest-summary">
          <div class="summary-row">
            <span>Huésped</span>
            <span>{{ booking.guestInfo.firstName }} {{ booking.guestInfo.lastName }}</span>
          </div>
          <div class="summary-row">
            <span>Habitaciones</span>
            <span>{{ booking.rooms }}</span>
          </div>
          <div class="summary-row">
            <span>Adultos</span>
            <span>{{ booking.adults }}</span>
          </div>
          <div class="summary-row" *ngIf="booking.children > 0">
            <span>Niños</span>
            <span>{{ booking.children }}</span>
          </div>
          <div class="summary-row">
            <span>Noches</span>
            <span>{{ booking.nights }}</span>
          </div>
        </div>

        <div class="price-summary">
          <div class="price-row">
            <span>Precio por noche</span>
            <span>{{ booking.pricePerNight | number:'1.2-2' }} {{ booking.currency }}</span>
          </div>
          <div class="price-row total">
            <span>Total</span>
            <span>{{ booking.totalPrice | number:'1.2-2' }} {{ booking.currency }}</span>
          </div>
        </div>

        <div class="member-badge" *ngIf="booking.isMember">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" />
          </svg>
          <span>Reserva de miembro Marriott International</span>
        </div>
      </div>

      <!-- Acciones -->
      <div class="confirmation-actions">
        <button class="btn-primary" (click)="goToMyReservations()">
          Ver mis reservas
        </button>
        <button class="btn-secondary" (click)="printConfirmation()">
          Imprimir confirmación
        </button>
        <button class="btn-outline" (click)="goToHome()">
          Volver al inicio
        </button>
      </div>

      <!-- Información importante -->
      <div class="important-info">
        <h3>Información importante</h3>
        <ul>
          <li>Presenta tu número de confirmación al registrarte en el hotel.</li>
          <li>Recuerda llevar una identificación válida con foto.</li>
          <li>La cancelación gratuita está disponible hasta 24 horas antes del check-in.</li>
          <li>Para cualquier consulta, contacta directamente con el hotel.</li>
        </ul>
      </div>
    </div>
  </div>
</section>